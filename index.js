module.exports=function(a){function l(){e&&n(),f&&q(),g&&r(),c&&x(),m(h-1,-b.offsetWidth+"px","afterBegin"),i&&u(i)}function m(a,c,d){var e=b.querySelectorAll(".b-carousel__items li")[a];e.style.marginLeft=c,b.querySelector(".b-carousel__items").removeChild(e),b.querySelector(".b-carousel__items").insertAdjacentHTML(d,e.outerHTML)}function n(){var a=document.createElement("ul");a.classList.add("b-carousel__nav-dots"),a.addEventListener("click",p.bind(this));for(var c=0;c<h;c++){var d=document.createElement("li");d.setAttribute("data-position",c),a.appendChild(d)}b.appendChild(a),o()}function o(){switch([].forEach.call(b.querySelectorAll(".b-carousel__nav-dots li"),function(a){a.classList.remove("active")}),j){case-1:j=h-1;break;case h:j=0}b.querySelectorAll(".b-carousel__nav-dots li")[j].classList.add("active")}function p(a){"LI"===a.target.tagName&&u(a.target.getAttribute("data-position"))}function q(){var a=document.createElement("button");a.innerHTML="&lsaquo;",a.classList.add("b-carousel__nav-arrow_prev");var c=document.createElement("button");c.innerHTML="&rsaquo;",c.classList.add("b-carousel__nav-arrow_next"),a.addEventListener("click",v),c.addEventListener("click",w),b.appendChild(a),b.appendChild(c)}function r(){var a=document.createElement("button");a.innerHTML="Play",a.classList.add("b-carousel__button_play"),a.addEventListener("click",x);var c=document.createElement("button");c.innerHTML="Stop",c.classList.add("b-carousel__button_stop"),c.addEventListener("click",y),b.appendChild(a),b.appendChild(c)}function s(a,b){return b>=0?void(a.style.marginLeft=""):(a.style.marginLeft=b+"px",void setTimeout(function(){s(a,b+100)},20))}function t(a,c){return c<=-b.offsetWidth?void(a.style.marginLeft=-b.offsetWidth+"px"):(a.style.marginLeft=c+"px",void setTimeout(function(){t(a,c-100)},20))}function u(a){var b=j-a;if(0!==b)if(b<0)for(var c=0;c<-b;c++)w();else for(var c=0;c<b;c++)v()}function v(){s(b.querySelectorAll(".b-carousel__items li")[0],0),m(h-1,-b.offsetWidth+"px","afterBegin"),j--,o()}function w(){t(b.querySelectorAll(".b-carousel__items li")[1],-b.offsetWidth),m(0,"","beforeEnd"),j++,o()}function x(){k||(k=setInterval(w.bind(this),d))}function y(){clearInterval(k),k=null}var b=document.getElementById(a.elem),c=a.autoplay||!1,d=a.interval||3e3,e=a.dots&&!0,f=a.arrows&&!0,g=a.buttons&&!0,h=b.querySelectorAll("li").length,i=a.initial>=h?h:a.initial,j=0,k=null;return h>1&&l(),{initSlide:u,prev:v,next:w,play:x,stop:y}};